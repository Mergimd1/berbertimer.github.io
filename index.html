<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agoni Barber | App Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, onSnapshot, query, where, deleteDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDd6wjVvh-28PODRDJ9bkSf8KKnVhmmf2A",
            authDomain: "agonicrew-app.firebaseapp.com",
            projectId: "agonicrew-app",
            storageBucket: "agonicrew-app.firebasestorage.app",
            messagingSenderId: "304023532430",
            appId: "1:304023532430:web:5914d16317835914d1631783"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.saveToFirebase = async function(data) {
            try { await addDoc(collection(db, "appointments"), data); return true; } 
            catch (e) { console.error(e); return false; }
        };

        window.getTerminetRealTime = function(barberName, callback) {
            const q = query(collection(db, "appointments"), where("b", "==", barberName));
            onSnapshot(q, (snapshot) => {
                const docs = [];
                snapshot.forEach(d => docs.push({ ...d.data(), id: d.id }));
                callback(docs);
            });
        };

        window.deleteTerminFirebase = async function(id) { await deleteDoc(doc(db, "appointments", id)); };

        window.getTerminePerBllokim = async function(barberName, data) {
            const q = query(collection(db, "appointments"), where("b", "==", barberName), where("d", "==", data));
            const snapshot = await getDocs(q);
            const docs = [];
            snapshot.forEach(d => docs.push(d.data()));
            return docs;
        };
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap');
        
        body { background-color: #0f172a; font-family: 'Poppins', sans-serif; color: #fff; margin: 0; }
        
        /* 6D EFFECT - WHEEL CONTAINER */
        #wheel-container { 
            position: relative; 
            width: 320px; 
            height: 320px; 
            margin: 40px auto; 
            perspective: 1000px;
        }

        /* The '6D' Outer Ring with Glow */
        .wheel-outer-ring {
            position: absolute;
            inset: -15px;
            background: linear-gradient(145deg, #1e293b, #0f172a);
            border-radius: 50%;
            box-shadow: 
                0 0 30px rgba(0,0,0,0.8),
                inset 0 0 15px rgba(255,255,255,0.1),
                0 0 20px #fbbf24;
            z-index: 1;
        }

        #wheel { 
            width: 100%; 
            height: 100%; 
            border-radius: 50%; 
            border: 10px solid #111827; 
            position: relative; 
            overflow: hidden; 
            transition: transform 5s cubic-bezier(0.15, 0.1, 0.15, 1); 
            background: #fff;
            z-index: 5;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.5);
        }

        /* Center Hub 3D */
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #fcd34d 0%, #b45309 100%);
            border-radius: 50%;
            border: 4px solid #111827;
            z-index: 20;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5), inset 0 -4px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 3D Pointer */
        .wheel-pointer { 
            position: absolute; 
            top: -30px; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 40px; 
            height: 50px; 
            background: #ef4444; 
            z-index: 30; 
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5));
            border-top: 5px solid #b91c1c;
        }

        .segment { 
            position: absolute; 
            width: 50%; 
            height: 50%; 
            transform-origin: 100% 100%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            clip-path: polygon(0 0, 100% 0, 100% 100%);
        }

        .segment-content { 
            position: absolute; 
            width: 120px; 
            height: 100%; 
            transform-origin: center bottom; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: flex-start; 
            padding-top: 25px; 
            text-align: center;
        }

        /* Clear Text with Hearts */
        .segment-content span { 
            writing-mode: vertical-rl; 
            transform: rotate(180deg); 
            font-size: 13px; 
            font-weight: 900; 
            text-transform: uppercase; 
            color: #111827; 
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px rgba(255,255,255,0.8);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .heart-icon { color: #ef4444; font-size: 14px; margin-bottom: 5px; }

        /* UI Elements */
        .video-header { background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1585747860715-2ba37e788b70?q=80&w=2074'); background-size: cover; background-position: center; height: 220px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-bottom: 4px solid #fbbf24; }
        .home-card { background: #1e293b; border-radius: 24px; padding: 20px; display: flex; flex-direction: column; align-items: center; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .home-card:active { transform: scale(0.95); }
        .gold-card { background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%); color: #111827; border-radius: 30px; padding: 30px; position: relative; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        
        .price-badge { 
            position: absolute; 
            top: 20px; 
            right: -30px; 
            background: #ef4444; 
            color: white; 
            padding: 8px 40px; 
            transform: rotate(45deg); 
            font-weight: 900; 
            font-size: 18px; 
            box-shadow: 0 5px 10px rgba(0,0,0,0.2); 
        }

        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: #1e293b; display: flex; justify-content: space-around; padding: 15px; border-top: 2px solid #334155; z-index: 100; }
        .nav-item { color: #94a3b8; text-align: center; font-size: 10px; font-weight: bold; }
        .nav-item.active { color: #fbbf24; }

        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1000; align-items: center; justify-content: center; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal-body { background: #1e293b; width: 100%; max-width: 400px; border-radius: 35px; padding: 30px; position: relative; border: 1px solid #334155; max-height: 90vh; overflow-y: auto; }

        input { background: #0f172a !important; color: white !important; border: 1px solid #334155 !important; padding: 15px; border-radius: 15px; width: 100%; margin-bottom: 10px; font-weight: bold; }
        .time-slot { background: #0f172a; padding: 12px; border-radius: 12px; text-align: center; border: 1px solid #334155; font-weight: bold; }
        .time-slot.selected { background: #fbbf24; color: #111827; }
        .time-slot.busy { opacity: 0.3; text-decoration: line-through; }
    </style>
</head>
<body class="pb-24">

    <header id="main-header" class="video-header">
        <h1 class="text-4xl font-black italic tracking-tighter uppercase text-white">AGONI BARBER</h1>
        <div class="h-1 w-20 bg-yellow-400 mt-2"></div>
    </header>

    <main id="view-home" class="p-6">
        <div class="grid grid-cols-2 gap-4">
            <div class="home-card" onclick="openBooking()">
                <div class="w-14 h-14 bg-yellow-400/10 rounded-full flex items-center justify-center text-yellow-400 mb-3 text-2xl">
                    <i class="fa-solid fa-calendar-check"></i>
                </div>
                <span class="text-[11px] font-black uppercase">Rezervo</span>
            </div>
            <div class="home-card" onclick="switchPage('membership')">
                <div class="w-14 h-14 bg-red-400/10 rounded-full flex items-center justify-center text-red-400 mb-3 text-2xl">
                    <i class="fa-solid fa-crown"></i>
                </div>
                <span class="text-[11px] font-black uppercase">Membership</span>
            </div>
        </div>

        <div class="mt-6 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-[30px] p-6 flex justify-between items-center shadow-2xl" onclick="openWheel()">
            <div>
                <h3 class="text-2xl font-black uppercase italic leading-none">Rrotullo<br>& Fito</h3>
                <p class="text-[10px] font-bold mt-2 bg-black/20 px-2 py-1 rounded-lg inline-block">‚ù§Ô∏è PROVO FATIN T√ãND</p>
            </div>
            <div class="text-5xl animate-bounce">üéÅ</div>
        </div>
    </main>

    <div id="view-membership" class="hidden p-6">
        <div class="gold-card shadow-2xl">
            <div class="price-badge">25‚Ç¨</div>
            <h2 class="text-3xl font-black uppercase italic mb-2">Gold Member</h2>
            <ul class="text-sm font-bold space-y-2 opacity-90">
                <li><i class="fa-solid fa-heart mr-2"></i> 3 Qethje n√´ muaj</li>
                <li><i class="fa-solid fa-heart mr-2"></i> Pa pritje fare</li>
                <li><i class="fa-solid fa-heart mr-2"></i> Kafe falas</li>
            </ul>
        </div>
        <div class="mt-6 space-y-4">
            <input type="text" id="mName" placeholder="Emri Mbiemri">
            <input type="tel" id="mPhone" placeholder="Nr. Telefonit">
            <button onclick="confirmGold()" class="w-full bg-yellow-400 text-black h-16 rounded-2xl font-black uppercase text-lg shadow-xl">B√ãHU AN√ãTAR (25‚Ç¨)</button>
        </div>
    </div>

    <div id="view-kontakt" class="hidden p-6 text-center">
        <div class="bg-white/5 p-8 rounded-[40px] border border-white/10">
            <i class="fa-solid fa-location-dot text-4xl text-red-500 mb-4"></i>
            <h2 class="text-2xl font-black uppercase mb-2">Lokacioni</h2>
            <p class="text-gray-400 font-bold mb-6 italic">Agonicrew, Pej√´, 30000</p>
            <a href="tel:+38349721735" class="block w-full bg-green-500 text-white p-4 rounded-2xl font-black mb-3">THIRR TANI</a>
            <a href="https://instagram.com/agonibarber" class="block w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-2xl font-black">INSTAGRAM</a>
        </div>
    </div>

    <div id="wheelModal" class="modal-overlay">
        <div class="modal-body text-center">
            <button onclick="closeWheel()" class="absolute top-4 right-6 text-2xl opacity-50">√ó</button>
            <h2 class="text-2xl font-black uppercase italic mb-2">Rrotulla 6D ‚ù§Ô∏è</h2>
            <p class="text-[10px] text-gray-400 font-bold uppercase mb-4">Fituesi duhet t√´ vij√´ sot!</p>

            <div id="wheel-container">
                <div class="wheel-outer-ring"></div>
                <div class="wheel-pointer"></div>
                <div id="wheel"></div>
                <div class="wheel-center">
                    <i class="fa-solid fa-scissors text-white text-xl"></i>
                </div>
            </div>

            <button id="spinBtn" onclick="spinWheel()" class="w-full bg-yellow-400 text-black h-16 rounded-2xl font-black uppercase tracking-widest text-xl mt-4 shadow-2xl">RROTULLO TANI</button>
            
            <div id="winDisplay" class="hidden mt-6 p-4 bg-green-500 rounded-2xl animate-pulse">
                <p class="font-black text-white uppercase" id="winText"></p>
            </div>
        </div>
    </div>

    <div id="bookingModal" class="modal-overlay">
        <div class="modal-body">
            <h2 class="text-xl font-black uppercase mb-4">Zgjedh Sh√´rbimin</h2>
            <div class="space-y-2">
                <div class="p-4 bg-white/5 rounded-xl flex justify-between font-bold border border-white/10" onclick="setService('Qethje', 5)">
                    <span>Qethje</span><span>5‚Ç¨</span>
                </div>
                </div>
            <input type="text" id="cName" placeholder="Emri juaj" class="mt-6">
            <button onclick="alert('Te dh√´nat po ruhen...')" class="w-full bg-blue-600 text-white p-4 rounded-xl font-black mt-4">KONFIRMO</button>
            <button onclick="closeModal()" class="w-full mt-2 text-sm opacity-50">Mbyll</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <div onclick="switchPage('home')" class="nav-item active"><i class="fa-solid fa-house text-xl"></i><p>Ballina</p></div>
        <div onclick="openBooking()" class="nav-item"><i class="fa-solid fa-cut text-xl"></i><p>Rezervo</p></div>
        <div onclick="switchPage('kontakt')" class="nav-item"><i class="fa-solid fa-map-pin text-xl"></i><p>Kontakt</p></div>
    </nav>

    <script>
        const prizes = [
            { text: "Qethje Falas", color: "#fbbf24", icon: "‚ù§Ô∏è" },
            { text: "Pa Fat Sot", color: "#ffffff", icon: "üíî" },
            { text: "Wax Falas", color: "#fbbf24", icon: "‚ù§Ô∏è" },
            { text: "Provoni Nes√´r", color: "#ffffff", icon: "üíî" },
            { text: "Kafe Falas", color: "#fbbf24", icon: "‚ù§Ô∏è" },
            { text: "Pa Fat Sot", color: "#ffffff", icon: "üíî" },
            { text: "Mjek√´rr Falas", color: "#fbbf24", icon: "‚ù§Ô∏è" },
            { text: "Provoni Nes√´r", color: "#ffffff", icon: "üíî" }
        ];

        function initWheel() {
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            prizes.forEach((p, i) => {
                const seg = document.createElement('div');
                seg.className = 'segment';
                seg.style.backgroundColor = p.color;
                seg.style.transform = `rotate(${i * 45}deg)`;
                
                const content = document.createElement('div');
                content.className = 'segment-content';
                content.style.transform = `rotate(22.5deg)`;
                
                const textSpan = document.createElement('span');
                textSpan.innerHTML = `<i class="heart-icon">${p.icon}</i> ${p.text}`;
                
                content.appendChild(textSpan);
                seg.appendChild(content);
                wheel.appendChild(seg);
            });
        }

        function switchPage(p) {
            ['home', 'membership', 'kontakt'].forEach(v => {
                document.getElementById('view-'+v).classList.add('hidden');
            });
            document.getElementById('view-'+p).classList.remove('hidden');
            if(p === 'home') document.getElementById('main-header').style.display = 'flex';
            else document.getElementById('main-header').style.display = 'none';
        }

        function openWheel() { document.getElementById('wheelModal').classList.add('active'); initWheel(); }
        function closeWheel() { document.getElementById('wheelModal').classList.remove('active'); }
        function openBooking() { document.getElementById('bookingModal').classList.add('active'); }
        function closeModal() { document.getElementById('bookingModal').classList.remove('active'); }

        let spinning = false;
        function spinWheel() {
            if(spinning) return;
            spinning = true;
            const btn = document.getElementById('spinBtn');
            btn.style.opacity = "0.5";
            
            let prizeIndex = Math.floor(Math.random() * prizes.length);
            const degrees = (3600 + (360 - (prizeIndex * 45)) - 22.5); 
            
            document.getElementById('wheel').style.transform = `rotate(${degrees}deg)`;
            
            setTimeout(() => {
                spinning = false;
                const winText = prizes[prizeIndex].text;
                if(!winText.includes("Pa Fat") && !winText.includes("Nes√´r")) {
                    document.getElementById('winDisplay').classList.remove('hidden');
                    document.getElementById('winText').innerText = "URIME! FITOVE: " + winText;
                } else {
                    alert("M√´ shum√´ fat her√´n tjet√´r!");
                }
            }, 5000);
        }

        async function confirmGold() {
            let n = document.getElementById('mName').value;
            if(!n) return alert("Shkruaj emrin!");
            alert("U d√´rgua k√´rkesa p√´r Membership Gold 25‚Ç¨!");
            location.reload();
        }
    </script>
</body>
</html>

